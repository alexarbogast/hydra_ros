<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">
  <xacro:macro name="positioner_macro" params="prefix">

    <!-- link list -->
    <link name="${prefix}rotary_table_base">
        <visual>
        <geometry>
          <mesh filename="package://hydra_description/meshes/visual/rotary_table.dae"/>
        </geometry>
        <origin rpy="0.0 0.0 0.0" xyz="0 0 0"/>
      </visual>
      <collision>
        <geometry>
          <mesh filename="package://hydra_description/meshes/collision/rotary_table_collision.stl"/>
        </geometry>
        <origin rpy="0.0 0.0 0.0" xyz="0 0 0"/>
      </collision>
    </link>
    <link name="${prefix}rotary_table_top"/>
    
    <link name="${prefix}positioner_base">
        <visual>
        <geometry>
          <mesh filename="package://hydra_description/meshes/visual/hydra_positioner.dae"/>
        </geometry>
        <origin rpy="0.0 0.0 0.0" xyz="0 0 0"/>
      </visual>
      <collision>
        <geometry>
          <mesh filename="package://hydra_description/meshes/collision/hydra_positioner_collision.stl"/>
        </geometry>
        <origin rpy="0.0 0.0 0.0" xyz="0 0 0"/>
      </collision>
    </link>
    <link name="${prefix}positioner"/>
    <link name="${prefix}positioner_static"/>

    <!-- joint list -->
    <joint name="{prefix}rotary_table_top_base" type="fixed">
      <parent link="${prefix}rotary_table_base"/>
      <child link="${prefix}rotary_table_top"/>
      <origin rpy="0.0 0.0 0.0" xyz="0 0 0.183984"/>
    </joint>
    
    <joint name="${prefix}rotary_table_positioner" type="continuous">
      <origin rpy="0.0 0.0 0.0" xyz="0 0 0"/>
      <axis xyz="0 0 1"/>
      <parent link="${prefix}rotary_table_top"/>
      <child link="${prefix}positioner_base"/>
    </joint>

    <joint name="${prefix}positioner_joint" type="fixed">
      <origin rpy="0.0 0.0 0.0" xyz="0 0 0.03175"/>
      <axis xyz="0 0 1"/>
      <parent link="${prefix}positioner_base"/>
      <child link="${prefix}positioner"/>
    </joint>

    <joint name="${prefix}positioner_static_joint" type="fixed">
      <origin rpy="0.0 0.0 0.0" xyz="0 0 0.03175"/>
      <parent link="${prefix}rotary_table_top"/>
      <child link="${prefix}positioner_static"/>
    </joint>

  </xacro:macro>
</robot>
